{"ast":null,"code":"\"use strict\";\n\n/*\nThis file is part of web3.js.\n\nweb3.js is free software: you can redistribute it and/or modify\nit under the terms of the GNU Lesser General Public License as published by\nthe Free Software Foundation, either version 3 of the License, or\n(at your option) any later version.\n\nweb3.js is distributed in the hope that it will be useful,\nbut WITHOUT ANY WARRANTY; without even the implied warranty of\nMERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\nGNU Lesser General Public License for more details.\n\nYou should have received a copy of the GNU Lesser General Public License\nalong with web3.js.  If not, see <http://www.gnu.org/licenses/>.\n*/\nrequire(\"core-js/modules/es.array.push.js\");\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Contract = void 0;\nconst web3_core_1 = require(\"web3-core\");\nconst web3_errors_1 = require(\"web3-errors\");\nconst web3_eth_1 = require(\"web3-eth\");\nconst web3_eth_abi_1 = require(\"web3-eth-abi\");\nconst web3_types_1 = require(\"web3-types\");\nconst web3_utils_1 = require(\"web3-utils\");\nconst web3_validator_1 = require(\"web3-validator\");\nconst encoding_js_1 = require(\"./encoding.js\");\nconst log_subscription_js_1 = require(\"./log_subscription.js\");\nconst utils_js_1 = require(\"./utils.js\");\nconst contractSubscriptions = {\n  logs: log_subscription_js_1.LogsSubscription,\n  newHeads: web3_eth_1.NewHeadsSubscription,\n  newBlockHeaders: web3_eth_1.NewHeadsSubscription\n};\n/**\n * The class designed to interact with smart contracts on the Ethereum blockchain.\n */\nclass Contract extends web3_core_1.Web3Context {\n  constructor(jsonInterface, addressOrOptionsOrContext, optionsOrContextOrReturnFormat, contextOrReturnFormat, returnFormat) {\n    var _a, _b, _c;\n    // eslint-disable-next-line no-nested-ternary\n    const options = (0, utils_js_1.isContractInitOptions)(addressOrOptionsOrContext) ? addressOrOptionsOrContext : (0, utils_js_1.isContractInitOptions)(optionsOrContextOrReturnFormat) ? optionsOrContextOrReturnFormat : undefined;\n    let contractContext;\n    if ((0, utils_js_1.isWeb3ContractContext)(addressOrOptionsOrContext)) {\n      contractContext = addressOrOptionsOrContext;\n    } else if ((0, utils_js_1.isWeb3ContractContext)(optionsOrContextOrReturnFormat)) {\n      contractContext = optionsOrContextOrReturnFormat;\n    } else {\n      contractContext = contextOrReturnFormat;\n    }\n    let provider;\n    if (typeof addressOrOptionsOrContext === 'object' && 'provider' in addressOrOptionsOrContext) {\n      provider = addressOrOptionsOrContext.provider;\n    } else if (typeof optionsOrContextOrReturnFormat === 'object' && 'provider' in optionsOrContextOrReturnFormat) {\n      provider = optionsOrContextOrReturnFormat.provider;\n    } else if (typeof contextOrReturnFormat === 'object' && 'provider' in contextOrReturnFormat) {\n      provider = contextOrReturnFormat.provider;\n    } else {\n      provider = Contract.givenProvider;\n    }\n    super(Object.assign(Object.assign({}, contractContext), {\n      provider,\n      registeredSubscriptions: contractSubscriptions\n    }));\n    /**\n     * Set to true if you want contracts' defaults to sync with global defaults.\n     */\n    this.syncWithContext = false;\n    this._functions = {};\n    if (!(0, web3_validator_1.isNullish)(options) && !(0, web3_validator_1.isNullish)(options.data) && !(0, web3_validator_1.isNullish)(options.input) && this.config.contractDataInputFill !== 'both') throw new web3_errors_1.ContractTransactionDataAndInputError({\n      data: options.data,\n      input: options.input\n    });\n    this._overloadedMethodAbis = new Map();\n    // eslint-disable-next-line no-nested-ternary\n    const returnDataFormat = (0, web3_utils_1.isDataFormat)(contextOrReturnFormat) ? contextOrReturnFormat : (0, web3_utils_1.isDataFormat)(optionsOrContextOrReturnFormat) ? optionsOrContextOrReturnFormat : returnFormat !== null && returnFormat !== void 0 ? returnFormat : web3_types_1.DEFAULT_RETURN_FORMAT;\n    const address = typeof addressOrOptionsOrContext === 'string' ? addressOrOptionsOrContext : undefined;\n    this.config.contractDataInputFill = (_a = options === null || options === void 0 ? void 0 : options.dataInputFill) !== null && _a !== void 0 ? _a : this.config.contractDataInputFill;\n    this._parseAndSetJsonInterface(jsonInterface, returnDataFormat);\n    if (!(0, web3_validator_1.isNullish)(address)) {\n      this._parseAndSetAddress(address, returnDataFormat);\n    }\n    this.options = {\n      address,\n      jsonInterface: this._jsonInterface,\n      gas: (_b = options === null || options === void 0 ? void 0 : options.gas) !== null && _b !== void 0 ? _b : options === null || options === void 0 ? void 0 : options.gasLimit,\n      gasPrice: options === null || options === void 0 ? void 0 : options.gasPrice,\n      from: options === null || options === void 0 ? void 0 : options.from,\n      input: options === null || options === void 0 ? void 0 : options.input,\n      data: options === null || options === void 0 ? void 0 : options.data\n    };\n    this.syncWithContext = (_c = options === null || options === void 0 ? void 0 : options.syncWithContext) !== null && _c !== void 0 ? _c : false;\n    if (contractContext instanceof web3_core_1.Web3Context) {\n      this.subscribeToContextEvents(contractContext);\n    }\n    Object.defineProperty(this.options, 'address', {\n      set: value => this._parseAndSetAddress(value, returnDataFormat),\n      get: () => this._address\n    });\n    Object.defineProperty(this.options, 'jsonInterface', {\n      set: value => this._parseAndSetJsonInterface(value, returnDataFormat),\n      get: () => this._jsonInterface\n    });\n    if (contractContext instanceof web3_core_1.Web3Context) {\n      contractContext.on(web3_core_1.Web3ConfigEvent.CONFIG_CHANGE, event => {\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment\n        this.setConfig({\n          [event.name]: event.newValue\n        });\n      });\n    }\n  }\n  /**\n   * Subscribe to an event.\n   *\n   * ```ts\n   * await myContract.events.MyEvent([options])\n   * ```\n   *\n   * There is a special event `allEvents` that can be used to subscribe all events.\n   *\n   * ```ts\n   * await myContract.events.allEvents([options])\n   * ```\n   *\n   * @returns - When individual event is accessed will returns {@link ContractBoundEvent} object\n   */\n  get events() {\n    return this._events;\n  }\n  /**\n   * Creates a transaction object for that method, which then can be `called`, `send`, `estimated`, `createAccessList` , or `ABI encoded`.\n   *\n   * The methods of this smart contract are available through:\n   *\n   * The name: `myContract.methods.myMethod(123)`\n   * The name with parameters: `myContract.methods['myMethod(uint256)'](123)`\n   * The signature `myContract.methods['0x58cf5f10'](123)`\n   *\n   * This allows calling functions with same name but different parameters from the JavaScript contract object.\n   *\n   * \\> The method signature does not provide a type safe interface, so we recommend to use method `name` instead.\n   *\n   * ```ts\n   * // calling a method\n   * const result = await myContract.methods.myMethod(123).call({from: '0xde0B295669a9FD93d5F28D9Ec85E40f4cb697BAe'});\n   *\n   * // or sending and using a promise\n   * const receipt = await myContract.methods.myMethod(123).send({from: '0xde0B295669a9FD93d5F28D9Ec85E40f4cb697BAe'});\n   *\n   * // or sending and using the events\n   * const sendObject = myContract.methods.myMethod(123).send({from: '0xde0B295669a9FD93d5F28D9Ec85E40f4cb697BAe'});\n   * sendObject.on('transactionHash', function(hash){\n   *   ...\n   * });\n   * sendObject.on('receipt', function(receipt){\n   *   ...\n   * });\n   * sendObject.on('confirmation', function(confirmationNumber, receipt){\n   *   ...\n   * });\n   * sendObject.on('error', function(error, receipt) {\n   *   ...\n   * });\n   * ```\n   *\n   * @returns - Either returns {@link PayableMethodObject} or {@link NonPayableMethodObject} based on the definitions of the ABI of that contract.\n   */\n  get methods() {\n    return this._methods;\n  }\n  /**\n   * Clones the current contract instance. This doesn't deploy contract on blockchain and only creates a local clone.\n   *\n   * @returns - The new contract instance.\n   *\n   * ```ts\n   * const contract1 = new eth.Contract(abi, address, {gasPrice: '12345678', from: fromAddress});\n   *\n   * const contract2 = contract1.clone();\n   * contract2.options.address = address2;\n   *\n   * (contract1.options.address !== contract2.options.address);\n   * > true\n   * ```\n   */\n  clone() {\n    let newContract;\n    if (this.options.address) {\n      newContract = new Contract([...this._jsonInterface, ...this._errorsInterface], this.options.address, {\n        gas: this.options.gas,\n        gasPrice: this.options.gasPrice,\n        from: this.options.from,\n        input: this.options.input,\n        data: this.options.data,\n        provider: this.currentProvider,\n        syncWithContext: this.syncWithContext,\n        dataInputFill: this.config.contractDataInputFill\n      }, this.getContextObject());\n    } else {\n      newContract = new Contract([...this._jsonInterface, ...this._errorsInterface], {\n        gas: this.options.gas,\n        gasPrice: this.options.gasPrice,\n        from: this.options.from,\n        input: this.options.input,\n        data: this.options.data,\n        provider: this.currentProvider,\n        syncWithContext: this.syncWithContext,\n        dataInputFill: this.config.contractDataInputFill\n      }, this.getContextObject());\n    }\n    if (this.context) newContract.subscribeToContextEvents(this.context);\n    return newContract;\n  }\n  /**\n   * Call this function to deploy the contract to the blockchain. After successful deployment the promise will resolve with a new contract instance.\n   *\n   * ```ts\n   * myContract.deploy({\n   *   input: '0x12345...', // data keyword can be used, too. If input is used, data will be ignored.\n   *   arguments: [123, 'My String']\n   * })\n   * .send({\n   *   from: '0x1234567890123456789012345678901234567891',\n   *   gas: 1500000,\n   *   gasPrice: '30000000000000'\n   * }, function(error, transactionHash){ ... })\n   * .on('error', function(error){ ... })\n   * .on('transactionHash', function(transactionHash){ ... })\n   * .on('receipt', function(receipt){\n   *  console.log(receipt.contractAddress) // contains the new contract address\n   * })\n   * .on('confirmation', function(confirmationNumber, receipt){ ... })\n   * .then(function(newContractInstance){\n   *   console.log(newContractInstance.options.address) // instance with the new contract address\n   * });\n   *\n   *\n   * // When the data is already set as an option to the contract itself\n   * myContract.options.data = '0x12345...';\n   *\n   * myContract.deploy({\n   *   arguments: [123, 'My String']\n   * })\n   * .send({\n   *   from: '0x1234567890123456789012345678901234567891',\n   *   gas: 1500000,\n   *   gasPrice: '30000000000000'\n   * })\n   * .then(function(newContractInstance){\n   *   console.log(newContractInstance.options.address) // instance with the new contract address\n   * });\n   *\n   *\n   * // Simply encoding\n   * myContract.deploy({\n   *   input: '0x12345...',\n   *   arguments: [123, 'My String']\n   * })\n   * .encodeABI();\n   * > '0x12345...0000012345678765432'\n   *\n   *\n   * // Gas estimation\n   * myContract.deploy({\n   *   input: '0x12345...',\n   *   arguments: [123, 'My String']\n   * })\n   * .estimateGas(function(err, gas){\n   *   console.log(gas);\n   * });\n   * ```\n   *\n   * @returns - The transaction object\n   */\n  deploy(deployOptions) {\n    var _a, _b, _c;\n    let abi = this._jsonInterface.find(j => j.type === 'constructor');\n    if (!abi) {\n      abi = {\n        type: 'constructor',\n        inputs: [],\n        stateMutability: ''\n      };\n    }\n    const _input = (0, web3_utils_1.format)({\n      format: 'bytes'\n    }, (_a = deployOptions === null || deployOptions === void 0 ? void 0 : deployOptions.input) !== null && _a !== void 0 ? _a : this.options.input, web3_types_1.DEFAULT_RETURN_FORMAT);\n    const _data = (0, web3_utils_1.format)({\n      format: 'bytes'\n    }, (_b = deployOptions === null || deployOptions === void 0 ? void 0 : deployOptions.data) !== null && _b !== void 0 ? _b : this.options.data, web3_types_1.DEFAULT_RETURN_FORMAT);\n    if ((!_input || _input.trim() === '0x') && (!_data || _data.trim() === '0x')) {\n      throw new web3_errors_1.Web3ContractError('contract creation without any data provided.');\n    }\n    const args = (_c = deployOptions === null || deployOptions === void 0 ? void 0 : deployOptions.arguments) !== null && _c !== void 0 ? _c : [];\n    const contractOptions = Object.assign(Object.assign({}, this.options), {\n      input: _input,\n      data: _data\n    });\n    const deployData = _input !== null && _input !== void 0 ? _input : _data;\n    return {\n      arguments: args,\n      send: options => {\n        const modifiedOptions = Object.assign({}, options);\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-return\n        return this._contractMethodDeploySend(abi, args, modifiedOptions, contractOptions);\n      },\n      estimateGas: (options, returnFormat = web3_types_1.DEFAULT_RETURN_FORMAT) => __awaiter(this, void 0, void 0, function* () {\n        const modifiedOptions = Object.assign({}, options);\n        return this._contractMethodEstimateGas({\n          abi: abi,\n          params: args,\n          returnFormat,\n          options: modifiedOptions,\n          contractOptions\n        });\n      }),\n      encodeABI: () => (0, encoding_js_1.encodeMethodABI)(abi, args, (0, web3_utils_1.format)({\n        format: 'bytes'\n      }, deployData, web3_types_1.DEFAULT_RETURN_FORMAT))\n    };\n  }\n  getPastEvents(param1, param2, param3) {\n    var _a;\n    return __awaiter(this, void 0, void 0, function* () {\n      const eventName = typeof param1 === 'string' ? param1 : web3_eth_1.ALL_EVENTS;\n      const options =\n      // eslint-disable-next-line no-nested-ternary\n      typeof param1 !== 'string' && !(0, web3_utils_1.isDataFormat)(param1) ? param1 : !(0, web3_utils_1.isDataFormat)(param2) ? param2 : {};\n      // eslint-disable-next-line no-nested-ternary\n      const returnFormat = (0, web3_utils_1.isDataFormat)(param1) ? param1 : (0, web3_utils_1.isDataFormat)(param2) ? param2 : param3 !== null && param3 !== void 0 ? param3 : web3_types_1.DEFAULT_RETURN_FORMAT;\n      const abi = eventName === 'allEvents' || eventName === web3_eth_1.ALL_EVENTS ? web3_eth_1.ALL_EVENTS_ABI : this._jsonInterface.find(j => 'name' in j && j.name === eventName);\n      if (!abi) {\n        throw new web3_errors_1.Web3ContractError(`Event ${eventName} not found.`);\n      }\n      const {\n        fromBlock,\n        toBlock,\n        topics,\n        address\n      } = (0, encoding_js_1.encodeEventABI)(this.options, abi, options !== null && options !== void 0 ? options : {});\n      const logs = yield (0, web3_eth_1.getLogs)(this, {\n        fromBlock,\n        toBlock,\n        topics,\n        address\n      }, returnFormat);\n      const decodedLogs = logs.map(log => typeof log === 'string' ? log : (0, web3_eth_1.decodeEventABI)(abi, log, this._jsonInterface, returnFormat));\n      const filter = (_a = options === null || options === void 0 ? void 0 : options.filter) !== null && _a !== void 0 ? _a : {};\n      const filterKeys = Object.keys(filter);\n      if (filterKeys.length > 0) {\n        return decodedLogs.filter(log => {\n          if (typeof log === 'string') return true;\n          return filterKeys.every(key => {\n            var _a;\n            if (Array.isArray(filter[key])) {\n              return filter[key].some(v => String(log.returnValues[key]).toUpperCase() === String(v).toUpperCase());\n            }\n            const inputAbi = (_a = abi.inputs) === null || _a === void 0 ? void 0 : _a.filter(input => input.name === key)[0];\n            if ((inputAbi === null || inputAbi === void 0 ? void 0 : inputAbi.indexed) && inputAbi.type === 'string') {\n              const hashedIndexedString = (0, web3_utils_1.keccak256)(filter[key]);\n              if (hashedIndexedString === String(log.returnValues[key])) return true;\n            }\n            return String(log.returnValues[key]).toUpperCase() === String(filter[key]).toUpperCase();\n          });\n        });\n      }\n      return decodedLogs;\n    });\n  }\n  _parseAndSetAddress(value, returnFormat = web3_types_1.DEFAULT_RETURN_FORMAT) {\n    this._address = value ? (0, web3_utils_1.toChecksumAddress)((0, web3_utils_1.format)({\n      format: 'address'\n    }, value, returnFormat)) : value;\n  }\n  _parseAndSetJsonInterface(abis, returnFormat = web3_types_1.DEFAULT_RETURN_FORMAT) {\n    var _a, _b, _c, _d, _e;\n    this._functions = {};\n    this._methods = {};\n    this._events = {};\n    let result = [];\n    const functionsAbi = abis.filter(abi => abi.type !== 'error');\n    const errorsAbi = abis.filter(abi => (0, web3_eth_abi_1.isAbiErrorFragment)(abi));\n    for (const a of functionsAbi) {\n      const abi = Object.assign(Object.assign({}, a), {\n        signature: ''\n      });\n      if ((0, web3_eth_abi_1.isAbiFunctionFragment)(abi)) {\n        const methodName = (0, web3_eth_abi_1.jsonInterfaceMethodToString)(abi);\n        const methodSignature = (0, web3_eth_abi_1.encodeFunctionSignature)(methodName);\n        abi.signature = methodSignature;\n        // make constant and payable backwards compatible\n        abi.constant = (_b = (_a = abi.stateMutability === 'view') !== null && _a !== void 0 ? _a : abi.stateMutability === 'pure') !== null && _b !== void 0 ? _b : abi.constant;\n        abi.payable = (_c = abi.stateMutability === 'payable') !== null && _c !== void 0 ? _c : abi.payable;\n        this._overloadedMethodAbis.set(abi.name, [...((_d = this._overloadedMethodAbis.get(abi.name)) !== null && _d !== void 0 ? _d : []), abi]);\n        const abiFragment = (_e = this._overloadedMethodAbis.get(abi.name)) !== null && _e !== void 0 ? _e : [];\n        const contractMethod = this._createContractMethod(abiFragment, errorsAbi);\n        this._functions[methodName] = {\n          signature: methodSignature,\n          method: contractMethod\n        };\n        // We don't know a particular type of the Abi method so can't type check\n        this._methods[abi.name] = this._functions[methodName].method;\n        // We don't know a particular type of the Abi method so can't type check\n        this._methods[methodName] = this._functions[methodName].method;\n        // We don't know a particular type of the Abi method so can't type check\n        this._methods[methodSignature] = this._functions[methodName].method;\n      } else if ((0, web3_eth_abi_1.isAbiEventFragment)(abi)) {\n        const eventName = (0, web3_eth_abi_1.jsonInterfaceMethodToString)(abi);\n        const eventSignature = (0, web3_eth_abi_1.encodeEventSignature)(eventName);\n        const event = this._createContractEvent(abi, returnFormat);\n        abi.signature = eventSignature;\n        if (!(eventName in this._events) || abi.name === 'bound') {\n          // It's a private type and we don't want to expose it and no need to check\n          this._events[eventName] = event;\n        }\n        // It's a private type and we don't want to expose it and no need to check\n        this._events[abi.name] = event;\n        // It's a private type and we don't want to expose it and no need to check\n        this._events[eventSignature] = event;\n      }\n      result = [...result, abi];\n    }\n    this._events.allEvents = this._createContractEvent(web3_eth_1.ALL_EVENTS_ABI, returnFormat);\n    this._jsonInterface = [...result];\n    this._errorsInterface = errorsAbi;\n  }\n  // eslint-disable-next-line class-methods-use-this\n  _getAbiParams(abi, params) {\n    var _a;\n    try {\n      return web3_validator_1.utils.transformJsonDataToAbiFormat((_a = abi.inputs) !== null && _a !== void 0 ? _a : [], params);\n    } catch (error) {\n      throw new web3_errors_1.Web3ContractError(`Invalid parameters for method ${abi.name}: ${error.message}`);\n    }\n  }\n  _createContractMethod(abiArr, errorsAbis) {\n    const abi = abiArr[abiArr.length - 1];\n    return (...params) => {\n      var _a, _b;\n      let abiParams;\n      const abis = (_a = this._overloadedMethodAbis.get(abi.name)) !== null && _a !== void 0 ? _a : [];\n      let methodAbi = abis[0];\n      const internalErrorsAbis = errorsAbis;\n      const arrayOfAbis = abis.filter(_abi => {\n        var _a;\n        return ((_a = _abi.inputs) !== null && _a !== void 0 ? _a : []).length === params.length;\n      });\n      if (abis.length === 1 || arrayOfAbis.length === 0) {\n        abiParams = this._getAbiParams(methodAbi, params);\n        web3_validator_1.validator.validate((_b = abi.inputs) !== null && _b !== void 0 ? _b : [], abiParams);\n      } else {\n        const errors = [];\n        for (const _abi of arrayOfAbis) {\n          try {\n            abiParams = this._getAbiParams(_abi, params);\n            web3_validator_1.validator.validate(_abi.inputs, abiParams);\n            methodAbi = _abi;\n            break;\n          } catch (e) {\n            errors.push(e);\n          }\n        }\n        if (errors.length === arrayOfAbis.length) {\n          throw new web3_validator_1.Web3ValidatorError(errors);\n        }\n      }\n      const methods = {\n        arguments: abiParams,\n        call: (options, block) => __awaiter(this, void 0, void 0, function* () {\n          return this._contractMethodCall(methodAbi, abiParams, internalErrorsAbis, options, block);\n        }),\n        send: options => this._contractMethodSend(methodAbi, abiParams, internalErrorsAbis, options),\n        estimateGas: (options, returnFormat = web3_types_1.DEFAULT_RETURN_FORMAT) => __awaiter(this, void 0, void 0, function* () {\n          return this._contractMethodEstimateGas({\n            abi: methodAbi,\n            params: abiParams,\n            returnFormat,\n            options\n          });\n        }),\n        encodeABI: () => (0, encoding_js_1.encodeMethodABI)(methodAbi, abiParams),\n        createAccessList: (options, block) => __awaiter(this, void 0, void 0, function* () {\n          return this._contractMethodCreateAccessList(methodAbi, abiParams, internalErrorsAbis, options, block);\n        })\n      };\n      if (methodAbi.stateMutability === 'payable') {\n        return methods;\n      }\n      return methods;\n    };\n  }\n  _contractMethodCall(abi, params, errorsAbi, options, block) {\n    var _a;\n    return __awaiter(this, void 0, void 0, function* () {\n      const tx = (0, utils_js_1.getEthTxCallParams)({\n        abi,\n        params,\n        options: Object.assign(Object.assign({}, options), {\n          dataInputFill: this.config.contractDataInputFill\n        }),\n        contractOptions: Object.assign(Object.assign({}, this.options), {\n          from: (_a = this.options.from) !== null && _a !== void 0 ? _a : this.config.defaultAccount\n        })\n      });\n      try {\n        const result = yield (0, web3_eth_1.call)(this, tx, block, web3_types_1.DEFAULT_RETURN_FORMAT);\n        return (0, encoding_js_1.decodeMethodReturn)(abi, result);\n      } catch (error) {\n        if (error instanceof web3_errors_1.ContractExecutionError) {\n          // this will parse the error data by trying to decode the ABI error inputs according to EIP-838\n          (0, web3_eth_abi_1.decodeContractErrorData)(errorsAbi, error.innerError);\n        }\n        throw error;\n      }\n    });\n  }\n  _contractMethodCreateAccessList(abi, params, errorsAbi, options, block) {\n    var _a;\n    return __awaiter(this, void 0, void 0, function* () {\n      const tx = (0, utils_js_1.getCreateAccessListParams)({\n        abi,\n        params,\n        options: Object.assign(Object.assign({}, options), {\n          dataInputFill: this.config.contractDataInputFill\n        }),\n        contractOptions: Object.assign(Object.assign({}, this.options), {\n          from: (_a = this.options.from) !== null && _a !== void 0 ? _a : this.config.defaultAccount\n        })\n      });\n      try {\n        return (0, web3_eth_1.createAccessList)(this, tx, block, web3_types_1.DEFAULT_RETURN_FORMAT);\n      } catch (error) {\n        if (error instanceof web3_errors_1.ContractExecutionError) {\n          // this will parse the error data by trying to decode the ABI error inputs according to EIP-838\n          (0, web3_eth_abi_1.decodeContractErrorData)(errorsAbi, error.innerError);\n        }\n        throw error;\n      }\n    });\n  }\n  _contractMethodSend(abi, params, errorsAbi, options, contractOptions) {\n    var _a, _b;\n    let modifiedContractOptions = contractOptions !== null && contractOptions !== void 0 ? contractOptions : this.options;\n    modifiedContractOptions = Object.assign(Object.assign({}, modifiedContractOptions), {\n      input: undefined,\n      from: (_b = (_a = modifiedContractOptions.from) !== null && _a !== void 0 ? _a : this.defaultAccount) !== null && _b !== void 0 ? _b : undefined\n    });\n    const tx = (0, utils_js_1.getSendTxParams)({\n      abi,\n      params,\n      options: Object.assign(Object.assign({}, options), {\n        dataInputFill: this.config.contractDataInputFill\n      }),\n      contractOptions: modifiedContractOptions\n    });\n    const transactionToSend = (0, web3_eth_1.sendTransaction)(this, tx, web3_types_1.DEFAULT_RETURN_FORMAT, {\n      // TODO Should make this configurable by the user\n      checkRevertBeforeSending: false,\n      contractAbi: this._jsonInterface\n    });\n    // eslint-disable-next-line no-void\n    void transactionToSend.on('error', error => {\n      if (error instanceof web3_errors_1.ContractExecutionError) {\n        // this will parse the error data by trying to decode the ABI error inputs according to EIP-838\n        (0, web3_eth_abi_1.decodeContractErrorData)(errorsAbi, error.innerError);\n      }\n    });\n    return transactionToSend;\n  }\n  _contractMethodDeploySend(abi, params, options, contractOptions) {\n    var _a, _b;\n    let modifiedContractOptions = contractOptions !== null && contractOptions !== void 0 ? contractOptions : this.options;\n    modifiedContractOptions = Object.assign(Object.assign({}, modifiedContractOptions), {\n      from: (_b = (_a = modifiedContractOptions.from) !== null && _a !== void 0 ? _a : this.defaultAccount) !== null && _b !== void 0 ? _b : undefined\n    });\n    const tx = (0, utils_js_1.getSendTxParams)({\n      abi,\n      params,\n      options: Object.assign(Object.assign({}, options), {\n        dataInputFill: this.config.contractDataInputFill\n      }),\n      contractOptions: modifiedContractOptions\n    });\n    return (0, web3_eth_1.sendTransaction)(this, tx, web3_types_1.DEFAULT_RETURN_FORMAT, {\n      transactionResolver: receipt => {\n        if (receipt.status === BigInt(0)) {\n          throw new web3_errors_1.Web3ContractError(\"code couldn't be stored\", receipt);\n        }\n        const newContract = this.clone();\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n        newContract.options.address = receipt.contractAddress;\n        return newContract;\n      },\n      contractAbi: this._jsonInterface,\n      // TODO Should make this configurable by the user\n      checkRevertBeforeSending: false\n    });\n  }\n  _contractMethodEstimateGas({\n    abi,\n    params,\n    returnFormat,\n    options,\n    contractOptions\n  }) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const tx = (0, utils_js_1.getEstimateGasParams)({\n        abi,\n        params,\n        options: Object.assign(Object.assign({}, options), {\n          dataInputFill: this.config.contractDataInputFill\n        }),\n        contractOptions: contractOptions !== null && contractOptions !== void 0 ? contractOptions : this.options\n      });\n      return (0, web3_eth_1.estimateGas)(this, tx, web3_types_1.BlockTags.LATEST, returnFormat);\n    });\n  }\n  // eslint-disable-next-line class-methods-use-this\n  _createContractEvent(abi, returnFormat = web3_types_1.DEFAULT_RETURN_FORMAT) {\n    return (...params) => {\n      var _a;\n      const {\n        topics,\n        fromBlock\n      } = (0, encoding_js_1.encodeEventABI)(this.options, abi, params[0]);\n      const sub = new log_subscription_js_1.LogsSubscription({\n        address: this.options.address,\n        topics,\n        abi,\n        jsonInterface: this._jsonInterface\n      }, {\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment\n        subscriptionManager: this.subscriptionManager,\n        returnFormat\n      });\n      if (!(0, web3_validator_1.isNullish)(fromBlock)) {\n        // emit past events when fromBlock is defined\n        this.getPastEvents(abi.name, {\n          fromBlock,\n          topics\n        }, returnFormat).then(logs => {\n          logs.forEach(log => sub.emit('data', log));\n        }).catch(error => {\n          sub.emit('error', new web3_errors_1.SubscriptionError('Failed to get past events.', error));\n        });\n      }\n      (_a = this.subscriptionManager) === null || _a === void 0 ? void 0 : _a.addSubscription(sub).catch(error => {\n        sub.emit('error', new web3_errors_1.SubscriptionError('Failed to subscribe.', error));\n      });\n      return sub;\n    };\n  }\n  subscribeToContextEvents(context) {\n    // eslint-disable-next-line @typescript-eslint/no-this-alias\n    const contractThis = this;\n    this.context = context;\n    if (contractThis.syncWithContext) {\n      context.on(web3_core_1.Web3ConfigEvent.CONFIG_CHANGE, event => {\n        contractThis.setConfig({\n          [event.name]: event.newValue\n        });\n      });\n    }\n  }\n}\nexports.Contract = Contract;","map":{"version":3,"names":["require","web3_core_1","web3_errors_1","web3_eth_1","web3_eth_abi_1","web3_types_1","web3_utils_1","web3_validator_1","encoding_js_1","log_subscription_js_1","utils_js_1","contractSubscriptions","logs","LogsSubscription","newHeads","NewHeadsSubscription","newBlockHeaders","Contract","Web3Context","constructor","jsonInterface","addressOrOptionsOrContext","optionsOrContextOrReturnFormat","contextOrReturnFormat","returnFormat","options","isContractInitOptions","undefined","contractContext","isWeb3ContractContext","provider","givenProvider","Object","assign","registeredSubscriptions","syncWithContext","_functions","isNullish","data","input","config","contractDataInputFill","ContractTransactionDataAndInputError","_overloadedMethodAbis","Map","returnDataFormat","isDataFormat","DEFAULT_RETURN_FORMAT","address","_a","dataInputFill","_parseAndSetJsonInterface","_parseAndSetAddress","_jsonInterface","gas","_b","gasLimit","gasPrice","from","_c","subscribeToContextEvents","defineProperty","set","value","get","_address","on","Web3ConfigEvent","CONFIG_CHANGE","event","setConfig","name","newValue","events","_events","methods","_methods","clone","newContract","_errorsInterface","currentProvider","getContextObject","context","deploy","deployOptions","abi","find","j","type","inputs","stateMutability","_input","format","_data","trim","Web3ContractError","args","arguments","contractOptions","deployData","send","modifiedOptions","_contractMethodDeploySend","estimateGas","__awaiter","_contractMethodEstimateGas","params","encodeABI","encodeMethodABI","getPastEvents","param1","param2","param3","eventName","ALL_EVENTS","ALL_EVENTS_ABI","fromBlock","toBlock","topics","encodeEventABI","getLogs","decodedLogs","map","log","decodeEventABI","filter","filterKeys","keys","length","every","key","Array","isArray","some","v","String","returnValues","toUpperCase","inputAbi","indexed","hashedIndexedString","keccak256","toChecksumAddress","abis","result","functionsAbi","errorsAbi","isAbiErrorFragment","a","signature","isAbiFunctionFragment","methodName","jsonInterfaceMethodToString","methodSignature","encodeFunctionSignature","constant","payable","_d","abiFragment","_e","contractMethod","_createContractMethod","method","isAbiEventFragment","eventSignature","encodeEventSignature","_createContractEvent","allEvents","_getAbiParams","utils","transformJsonDataToAbiFormat","error","message","abiArr","errorsAbis","abiParams","methodAbi","internalErrorsAbis","arrayOfAbis","_abi","validator","validate","errors","e","push","Web3ValidatorError","call","block","_contractMethodCall","_contractMethodSend","createAccessList","_contractMethodCreateAccessList","tx","getEthTxCallParams","defaultAccount","decodeMethodReturn","ContractExecutionError","decodeContractErrorData","innerError","getCreateAccessListParams","modifiedContractOptions","getSendTxParams","transactionToSend","sendTransaction","checkRevertBeforeSending","contractAbi","transactionResolver","receipt","status","BigInt","contractAddress","getEstimateGasParams","BlockTags","LATEST","sub","subscriptionManager","then","forEach","emit","catch","SubscriptionError","addSubscription","contractThis","exports"],"sources":["../../src/contract.ts"],"sourcesContent":[null],"mappings":";;AAAA;;;;;;;;;;;;;;;;AAAAA,OAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiBA,MAAAC,WAAA,GAAAD,OAAA;AAOA,MAAAE,aAAA,GAAAF,OAAA;AAMA,MAAAG,UAAA,GAAAH,OAAA;AAYA,MAAAI,cAAA,GAAAJ,OAAA;AASA,MAAAK,YAAA,GAAAL,OAAA;AAkCA,MAAAM,YAAA,GAAAN,OAAA;AACA,MAAAO,gBAAA,GAAAP,OAAA;AAOA,MAAAQ,aAAA,GAAAR,OAAA;AACA,MAAAS,qBAAA,GAAAT,OAAA;AASA,MAAAU,UAAA,GAAAV,OAAA;AAmFA,MAAMW,qBAAqB,GAAG;EAC7BC,IAAI,EAAEH,qBAAA,CAAAI,gBAAgB;EACtBC,QAAQ,EAAEX,UAAA,CAAAY,oBAAoB;EAC9BC,eAAe,EAAEb,UAAA,CAAAY;CACjB;AAED;;;AAGA,MAAaE,QACZ,SAAQhB,WAAA,CAAAiB,WAA0D;EAqGlEC,YACCC,aAAkB,EAClBC,yBAIc,EACdC,8BAIa,EACbC,qBAAsE,EACtEC,YAAyB;;IAEzB;IACA,MAAMC,OAAO,GAAG,IAAAf,UAAA,CAAAgB,qBAAqB,EAACL,yBAAyB,CAAC,GAC7DA,yBAAyB,GACzB,IAAAX,UAAA,CAAAgB,qBAAqB,EAACJ,8BAA8B,CAAC,GACrDA,8BAA8B,GAC9BK,SAAS;IAEZ,IAAIC,eAAe;IACnB,IAAI,IAAAlB,UAAA,CAAAmB,qBAAqB,EAACR,yBAAyB,CAAC,EAAE;MACrDO,eAAe,GAAGP,yBAAyB;KAC3C,MAAM,IAAI,IAAAX,UAAA,CAAAmB,qBAAqB,EAACP,8BAA8B,CAAC,EAAE;MACjEM,eAAe,GAAGN,8BAA8B;KAChD,MAAM;MACNM,eAAe,GAAGL,qBAAqB;;IAGxC,IAAIO,QAAQ;IACZ,IACC,OAAOT,yBAAyB,KAAK,QAAQ,IAC7C,UAAU,IAAIA,yBAAyB,EACtC;MACDS,QAAQ,GAAGT,yBAAyB,CAACS,QAAQ;KAC7C,MAAM,IACN,OAAOR,8BAA8B,KAAK,QAAQ,IAClD,UAAU,IAAIA,8BAA8B,EAC3C;MACDQ,QAAQ,GAAGR,8BAA8B,CAACQ,QAAQ;KAClD,MAAM,IACN,OAAOP,qBAAqB,KAAK,QAAQ,IACzC,UAAU,IAAIA,qBAAqB,EAClC;MACDO,QAAQ,GAAGP,qBAAqB,CAACO,QAAQ;KACzC,MAAM;MACNA,QAAQ,GAAGb,QAAQ,CAACc,aAAa;;IAGlC,KAAK,CAAAC,MAAA,CAAAC,MAAA,CAAAD,MAAA,CAAAC,MAAA,KACDL,eAAe;MAClBE,QAAQ;MACRI,uBAAuB,EAAEvB;IAAqB,GAC7C;IApIH;;;IAGO,KAAAwB,eAAe,GAAG,KAAK;IAKtB,KAAAC,UAAU,GAOd,EAAE;IAsHL,IACC,CAAC,IAAA7B,gBAAA,CAAA8B,SAAS,EAACZ,OAAO,CAAC,IACnB,CAAC,IAAAlB,gBAAA,CAAA8B,SAAS,EAACZ,OAAO,CAACa,IAAI,CAAC,IACxB,CAAC,IAAA/B,gBAAA,CAAA8B,SAAS,EAACZ,OAAO,CAACc,KAAK,CAAC,IACzB,IAAI,CAACC,MAAM,CAACC,qBAAqB,KAAK,MAAM,EAE5C,MAAM,IAAIvC,aAAA,CAAAwC,oCAAoC,CAAC;MAC9CJ,IAAI,EAAEb,OAAO,CAACa,IAAiB;MAC/BC,KAAK,EAAEd,OAAO,CAACc;KACf,CAAC;IACH,IAAI,CAACI,qBAAqB,GAAG,IAAIC,GAAG,EAAiC;IAErE;IACA,MAAMC,gBAAgB,GAAG,IAAAvC,YAAA,CAAAwC,YAAY,EAACvB,qBAAqB,CAAC,GACzDA,qBAAqB,GACrB,IAAAjB,YAAA,CAAAwC,YAAY,EAACxB,8BAA8B,CAAC,GAC5CA,8BAA8B,GAC9BE,YAAY,aAAZA,YAAY,cAAZA,YAAY,GAAInB,YAAA,CAAA0C,qBAAqB;IACxC,MAAMC,OAAO,GACZ,OAAO3B,yBAAyB,KAAK,QAAQ,GAAGA,yBAAyB,GAAGM,SAAS;IACrF,IAAI,CAACa,MAAM,CAACC,qBAAqB,GAChC,CAAAQ,EAAA,GAACxB,OAA+B,aAA/BA,OAAO,uBAAPA,OAAO,CAA0ByB,aAAa,cAAAD,EAAA,cAAAA,EAAA,GAC/C,IAAI,CAACT,MAAM,CAACC,qBAAqB;IACnC,IAAI,CAACU,yBAAyB,CAAC/B,aAAa,EAAEyB,gBAAgB,CAAC;IAE/D,IAAI,CAAC,IAAAtC,gBAAA,CAAA8B,SAAS,EAACW,OAAO,CAAC,EAAE;MACxB,IAAI,CAACI,mBAAmB,CAACJ,OAAO,EAAEH,gBAAgB,CAAC;;IAGpD,IAAI,CAACpB,OAAO,GAAG;MACduB,OAAO;MACP5B,aAAa,EAAE,IAAI,CAACiC,cAAc;MAClCC,GAAG,EAAE,CAAAC,EAAA,GAAA9B,OAAO,aAAPA,OAAO,uBAAPA,OAAO,CAAE6B,GAAG,cAAAC,EAAA,cAAAA,EAAA,GAAI9B,OAAO,aAAPA,OAAO,uBAAPA,OAAO,CAAE+B,QAAQ;MACtCC,QAAQ,EAAEhC,OAAO,aAAPA,OAAO,uBAAPA,OAAO,CAAEgC,QAAQ;MAC3BC,IAAI,EAAEjC,OAAO,aAAPA,OAAO,uBAAPA,OAAO,CAAEiC,IAAI;MACnBnB,KAAK,EAAEd,OAAO,aAAPA,OAAO,uBAAPA,OAAO,CAAEc,KAAK;MACrBD,IAAI,EAAEb,OAAO,aAAPA,OAAO,uBAAPA,OAAO,CAAEa;KACf;IAED,IAAI,CAACH,eAAe,GAAG,CAAAwB,EAAA,GAAClC,OAA+B,aAA/BA,OAAO,uBAAPA,OAAO,CAA0BU,eAAe,cAAAwB,EAAA,cAAAA,EAAA,GAAI,KAAK;IACjF,IAAI/B,eAAe,YAAY3B,WAAA,CAAAiB,WAAW,EAAE;MAC3C,IAAI,CAAC0C,wBAAwB,CAAChC,eAAe,CAAC;;IAE/CI,MAAM,CAAC6B,cAAc,CAAC,IAAI,CAACpC,OAAO,EAAE,SAAS,EAAE;MAC9CqC,GAAG,EAAGC,KAAc,IAAK,IAAI,CAACX,mBAAmB,CAACW,KAAK,EAAElB,gBAAgB,CAAC;MAC1EmB,GAAG,EAAEA,CAAA,KAAM,IAAI,CAACC;KAChB,CAAC;IAEFjC,MAAM,CAAC6B,cAAc,CAAC,IAAI,CAACpC,OAAO,EAAE,eAAe,EAAE;MACpDqC,GAAG,EAAGC,KAAkB,IAAK,IAAI,CAACZ,yBAAyB,CAACY,KAAK,EAAElB,gBAAgB,CAAC;MACpFmB,GAAG,EAAEA,CAAA,KAAM,IAAI,CAACX;KAChB,CAAC;IAEF,IAAIzB,eAAe,YAAY3B,WAAA,CAAAiB,WAAW,EAAE;MAC3CU,eAAe,CAACsC,EAAE,CAACjE,WAAA,CAAAkE,eAAe,CAACC,aAAa,EAAEC,KAAK,IAAG;QACzD;QACA,IAAI,CAACC,SAAS,CAAC;UAAE,CAACD,KAAK,CAACE,IAAI,GAAGF,KAAK,CAACG;QAAQ,CAAE,CAAC;MACjD,CAAC,CAAC;;EAEJ;EAEA;;;;;;;;;;;;;;;EAeA,IAAWC,MAAMA,CAAA;IAChB,OAAO,IAAI,CAACC,OAAO;EACpB;EAEA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;EAsCA,IAAWC,OAAOA,CAAA;IACjB,OAAO,IAAI,CAACC,QAAQ;EACrB;EAEA;;;;;;;;;;;;;;;EAeOC,KAAKA,CAAA;IACX,IAAIC,WAA0B;IAC9B,IAAI,IAAI,CAACrD,OAAO,CAACuB,OAAO,EAAE;MACzB8B,WAAW,GAAG,IAAI7D,QAAQ,CACzB,CAAC,GAAG,IAAI,CAACoC,cAAc,EAAE,GAAG,IAAI,CAAC0B,gBAAgB,CAAmB,EACpE,IAAI,CAACtD,OAAO,CAACuB,OAAO,EACpB;QACCM,GAAG,EAAE,IAAI,CAAC7B,OAAO,CAAC6B,GAAG;QACrBG,QAAQ,EAAE,IAAI,CAAChC,OAAO,CAACgC,QAAQ;QAC/BC,IAAI,EAAE,IAAI,CAACjC,OAAO,CAACiC,IAAI;QACvBnB,KAAK,EAAE,IAAI,CAACd,OAAO,CAACc,KAAK;QACzBD,IAAI,EAAE,IAAI,CAACb,OAAO,CAACa,IAAI;QACvBR,QAAQ,EAAE,IAAI,CAACkD,eAAe;QAC9B7C,eAAe,EAAE,IAAI,CAACA,eAAe;QACrCe,aAAa,EAAE,IAAI,CAACV,MAAM,CAACC;OAC3B,EACD,IAAI,CAACwC,gBAAgB,EAAE,CACvB;KACD,MAAM;MACNH,WAAW,GAAG,IAAI7D,QAAQ,CACzB,CAAC,GAAG,IAAI,CAACoC,cAAc,EAAE,GAAG,IAAI,CAAC0B,gBAAgB,CAAmB,EACpE;QACCzB,GAAG,EAAE,IAAI,CAAC7B,OAAO,CAAC6B,GAAG;QACrBG,QAAQ,EAAE,IAAI,CAAChC,OAAO,CAACgC,QAAQ;QAC/BC,IAAI,EAAE,IAAI,CAACjC,OAAO,CAACiC,IAAI;QACvBnB,KAAK,EAAE,IAAI,CAACd,OAAO,CAACc,KAAK;QACzBD,IAAI,EAAE,IAAI,CAACb,OAAO,CAACa,IAAI;QACvBR,QAAQ,EAAE,IAAI,CAACkD,eAAe;QAC9B7C,eAAe,EAAE,IAAI,CAACA,eAAe;QACrCe,aAAa,EAAE,IAAI,CAACV,MAAM,CAACC;OAC3B,EACD,IAAI,CAACwC,gBAAgB,EAAE,CACvB;;IAEF,IAAI,IAAI,CAACC,OAAO,EAAEJ,WAAW,CAAClB,wBAAwB,CAAC,IAAI,CAACsB,OAAO,CAAC;IAEpE,OAAOJ,WAAW;EACnB;EAEA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;EA6DOK,MAAMA,CAACC,aAUb;;IACA,IAAIC,GAAG,GAAG,IAAI,CAAChC,cAAc,CAACiC,IAAI,CAACC,CAAC,IAAIA,CAAC,CAACC,IAAI,KAAK,aAAa,CAA2B;IAC3F,IAAI,CAACH,GAAG,EAAE;MACTA,GAAG,GAAG;QACLG,IAAI,EAAE,aAAa;QACnBC,MAAM,EAAE,EAAE;QACVC,eAAe,EAAE;OACS;;IAG5B,MAAMC,MAAM,GAAG,IAAArF,YAAA,CAAAsF,MAAM,EACpB;MAAEA,MAAM,EAAE;IAAO,CAAE,EACnB,CAAA3C,EAAA,GAAAmC,aAAa,aAAbA,aAAa,uBAAbA,aAAa,CAAE7C,KAAK,cAAAU,EAAA,cAAAA,EAAA,GAAI,IAAI,CAACxB,OAAO,CAACc,KAAK,EAC1ClC,YAAA,CAAA0C,qBAAqB,CACrB;IAED,MAAM8C,KAAK,GAAG,IAAAvF,YAAA,CAAAsF,MAAM,EACnB;MAAEA,MAAM,EAAE;IAAO,CAAE,EACnB,CAAArC,EAAA,GAAA6B,aAAa,aAAbA,aAAa,uBAAbA,aAAa,CAAE9C,IAAI,cAAAiB,EAAA,cAAAA,EAAA,GAAI,IAAI,CAAC9B,OAAO,CAACa,IAAI,EACxCjC,YAAA,CAAA0C,qBAAqB,CACrB;IAED,IAAI,CAAC,CAAC4C,MAAM,IAAIA,MAAM,CAACG,IAAI,EAAE,KAAK,IAAI,MAAM,CAACD,KAAK,IAAIA,KAAK,CAACC,IAAI,EAAE,KAAK,IAAI,CAAC,EAAE;MAC7E,MAAM,IAAI5F,aAAA,CAAA6F,iBAAiB,CAAC,8CAA8C,CAAC;;IAG5E,MAAMC,IAAI,GAAG,CAAArC,EAAA,GAAAyB,aAAa,aAAbA,aAAa,uBAAbA,aAAa,CAAEa,SAAS,cAAAtC,EAAA,cAAAA,EAAA,GAAI,EAAE;IAE3C,MAAMuC,eAAe,GAAAlE,MAAA,CAAAC,MAAA,CAAAD,MAAA,CAAAC,MAAA,KAAyB,IAAI,CAACR,OAAO;MAAEc,KAAK,EAAEoD,MAAM;MAAErD,IAAI,EAAEuD;IAAK,EAAE;IACxF,MAAMM,UAAU,GAAGR,MAAM,aAANA,MAAM,cAANA,MAAM,GAAIE,KAAK;IAClC,OAAO;MACNI,SAAS,EAAED,IAAI;MACfI,IAAI,EACH3E,OAA0B,IAIvB;QACH,MAAM4E,eAAe,GAAArE,MAAA,CAAAC,MAAA,KAAQR,OAAO,CAAE;QAEtC;QACA,OAAO,IAAI,CAAC6E,yBAAyB,CACpCjB,GAA0B,EAC1BW,IAAiB,EACjBK,eAAe,EACfH,eAAe,CACf;MACF,CAAC;MACDK,WAAW,EAAEA,CACZ9E,OAA4B,EAC5BD,YAAA,GAA6BnB,YAAA,CAAA0C,qBAAqC,KAC/DyD,SAAA;QACH,MAAMH,eAAe,GAAArE,MAAA,CAAAC,MAAA,KAAQR,OAAO,CAAE;QACtC,OAAO,IAAI,CAACgF,0BAA0B,CAAC;UACtCpB,GAAG,EAAEA,GAA0B;UAC/BqB,MAAM,EAAEV,IAAiB;UACzBxE,YAAY;UACZC,OAAO,EAAE4E,eAAe;UACxBH;SACA,CAAC;MACH,CAAC;MACDS,SAAS,EAAEA,CAAA,KACV,IAAAnG,aAAA,CAAAoG,eAAe,EACdvB,GAA0B,EAC1BW,IAAiB,EACjB,IAAA1F,YAAA,CAAAsF,MAAM,EAAC;QAAEA,MAAM,EAAE;MAAO,CAAE,EAAEO,UAAmB,EAAE9F,YAAA,CAAA0C,qBAAqB,CAAC;KAEzE;EACF;EAwDa8D,aAAaA,CACzBC,MAKe,EACfC,MAA+C,EAC/CC,MAAqB;;;MAErB,MAAMC,SAAS,GAAG,OAAOH,MAAM,KAAK,QAAQ,GAAGA,MAAM,GAAG3G,UAAA,CAAA+G,UAAU;MAElE,MAAMzF,OAAO;MACZ;MACA,OAAOqF,MAAM,KAAK,QAAQ,IAAI,CAAC,IAAAxG,YAAA,CAAAwC,YAAY,EAACgE,MAAM,CAAC,GAChDA,MAAM,GACN,CAAC,IAAAxG,YAAA,CAAAwC,YAAY,EAACiE,MAAM,CAAC,GACrBA,MAAM,GACN,EAAE;MAEN;MACA,MAAMvF,YAAY,GAAG,IAAAlB,YAAA,CAAAwC,YAAY,EAACgE,MAAM,CAAC,GACtCA,MAAM,GACN,IAAAxG,YAAA,CAAAwC,YAAY,EAACiE,MAAM,CAAC,GACpBA,MAAM,GACNC,MAAM,aAANA,MAAM,cAANA,MAAM,GAAI3G,YAAA,CAAA0C,qBAAqB;MAElC,MAAMsC,GAAG,GACR4B,SAAS,KAAK,WAAW,IAAIA,SAAS,KAAK9G,UAAA,CAAA+G,UAAU,GAClD/G,UAAA,CAAAgH,cAAc,GACb,IAAI,CAAC9D,cAAc,CAACiC,IAAI,CACzBC,CAAC,IAAI,MAAM,IAAIA,CAAC,IAAIA,CAAC,CAAChB,IAAI,KAAK0C,SAAS,CACM;MAElD,IAAI,CAAC5B,GAAG,EAAE;QACT,MAAM,IAAInF,aAAA,CAAA6F,iBAAiB,CAAC,SAASkB,SAAS,aAAa,CAAC;;MAG7D,MAAM;QAAEG,SAAS;QAAEC,OAAO;QAAEC,MAAM;QAAEtE;MAAO,CAAE,GAAG,IAAAxC,aAAA,CAAA+G,cAAc,EAC7D,IAAI,CAAC9F,OAAO,EACZ4D,GAAG,EACH5D,OAAO,aAAPA,OAAO,cAAPA,OAAO,GAAI,EAAE,CACb;MAED,MAAMb,IAAI,GAAG,MAAM,IAAAT,UAAA,CAAAqH,OAAO,EAAC,IAAI,EAAE;QAAEJ,SAAS;QAAEC,OAAO;QAAEC,MAAM;QAAEtE;MAAO,CAAE,EAAExB,YAAY,CAAC;MACvF,MAAMiG,WAAW,GAAG7G,IAAI,CAAC8G,GAAG,CAACC,GAAG,IAC/B,OAAOA,GAAG,KAAK,QAAQ,GACpBA,GAAG,GACH,IAAAxH,UAAA,CAAAyH,cAAc,EAACvC,GAAG,EAAEsC,GAAgB,EAAE,IAAI,CAACtE,cAAc,EAAE7B,YAAY,CAAC,CAC3E;MAED,MAAMqG,MAAM,GAAG,CAAA5E,EAAA,GAAAxB,OAAO,aAAPA,OAAO,uBAAPA,OAAO,CAAEoG,MAAM,cAAA5E,EAAA,cAAAA,EAAA,GAAI,EAAE;MACpC,MAAM6E,UAAU,GAAG9F,MAAM,CAAC+F,IAAI,CAACF,MAAM,CAAC;MAEtC,IAAIC,UAAU,CAACE,MAAM,GAAG,CAAC,EAAE;QAC1B,OAAOP,WAAW,CAACI,MAAM,CAACF,GAAG,IAAG;UAC/B,IAAI,OAAOA,GAAG,KAAK,QAAQ,EAAE,OAAO,IAAI;UAExC,OAAOG,UAAU,CAACG,KAAK,CAAEC,GAAW,IAAI;;YACvC,IAAIC,KAAK,CAACC,OAAO,CAACP,MAAM,CAACK,GAAG,CAAC,CAAC,EAAE;cAC/B,OAAQL,MAAM,CAACK,GAAG,CAAe,CAACG,IAAI,CACpCC,CAAU,IACVC,MAAM,CAACZ,GAAG,CAACa,YAAY,CAACN,GAAG,CAAC,CAAC,CAACO,WAAW,EAAE,KAC3CF,MAAM,CAACD,CAAC,CAAC,CAACG,WAAW,EAAE,CACxB;;YAGF,MAAMC,QAAQ,GAAG,CAAAzF,EAAA,GAAAoC,GAAG,CAACI,MAAM,cAAAxC,EAAA,uBAAAA,EAAA,CAAE4E,MAAM,CAACtF,KAAK,IAAIA,KAAK,CAACgC,IAAI,KAAK2D,GAAG,EAAE,CAAC,CAAC;YACnE,IAAI,CAAAQ,QAAQ,aAARA,QAAQ,uBAARA,QAAQ,CAAEC,OAAO,KAAID,QAAQ,CAAClD,IAAI,KAAK,QAAQ,EAAE;cACpD,MAAMoD,mBAAmB,GAAG,IAAAtI,YAAA,CAAAuI,SAAS,EAAChB,MAAM,CAACK,GAAG,CAAW,CAAC;cAC5D,IAAIU,mBAAmB,KAAKL,MAAM,CAACZ,GAAG,CAACa,YAAY,CAACN,GAAG,CAAC,CAAC,EAAE,OAAO,IAAI;;YAGvE,OACCK,MAAM,CAACZ,GAAG,CAACa,YAAY,CAACN,GAAG,CAAC,CAAC,CAACO,WAAW,EAAE,KAC3CF,MAAM,CAACV,MAAM,CAACK,GAAG,CAAC,CAAC,CAACO,WAAW,EAAE;UAEnC,CAAC,CAAC;QACH,CAAC,CAAC;;MAGH,OAAOhB,WAAW;;;EAGXrE,mBAAmBA,CAACW,KAAe,EAAEvC,YAAA,GAA2BnB,YAAA,CAAA0C,qBAAqB;IAC5F,IAAI,CAACkB,QAAQ,GAAGF,KAAK,GAClB,IAAAzD,YAAA,CAAAwI,iBAAiB,EAAC,IAAAxI,YAAA,CAAAsF,MAAM,EAAC;MAAEA,MAAM,EAAE;IAAS,CAAE,EAAE7B,KAAK,EAAEvC,YAAY,CAAC,CAAC,GACrEuC,KAAK;EACT;EAEQZ,yBAAyBA,CAChC4F,IAAiB,EACjBvH,YAAA,GAA2BnB,YAAA,CAAA0C,qBAAqB;;IAEhD,IAAI,CAACX,UAAU,GAAG,EAAE;IACpB,IAAI,CAACwC,QAAQ,GAAG,EAAmC;IACnD,IAAI,CAACF,OAAO,GAAG,EAAkC;IAEjD,IAAIsE,MAAM,GAAgB,EAAE;IAE5B,MAAMC,YAAY,GAAGF,IAAI,CAAClB,MAAM,CAACxC,GAAG,IAAIA,GAAG,CAACG,IAAI,KAAK,OAAO,CAAC;IAC7D,MAAM0D,SAAS,GAAGH,IAAI,CAAClB,MAAM,CAACxC,GAAG,IAChC,IAAAjF,cAAA,CAAA+I,kBAAkB,EAAC9D,GAAG,CAAC,CACU;IAElC,KAAK,MAAM+D,CAAC,IAAIH,YAAY,EAAE;MAC7B,MAAM5D,GAAG,GAAArD,MAAA,CAAAC,MAAA,CAAAD,MAAA,CAAAC,MAAA,KACLmH,CAAC;QACJC,SAAS,EAAE;MAAE,EACb;MAED,IAAI,IAAAjJ,cAAA,CAAAkJ,qBAAqB,EAACjE,GAAG,CAAC,EAAE;QAC/B,MAAMkE,UAAU,GAAG,IAAAnJ,cAAA,CAAAoJ,2BAA2B,EAACnE,GAAG,CAAC;QACnD,MAAMoE,eAAe,GAAG,IAAArJ,cAAA,CAAAsJ,uBAAuB,EAACH,UAAU,CAAC;QAC3DlE,GAAG,CAACgE,SAAS,GAAGI,eAAe;QAE/B;QACApE,GAAG,CAACsE,QAAQ,GACX,CAAApG,EAAA,IAAAN,EAAA,GAAAoC,GAAG,CAACK,eAAe,KAAK,MAAM,cAAAzC,EAAA,cAAAA,EAAA,GAC9BoC,GAAG,CAACK,eAAe,KAAK,MAAM,cAAAnC,EAAA,cAAAA,EAAA,GAC9B8B,GAAG,CAACsE,QAAQ;QAEbtE,GAAG,CAACuE,OAAO,GAAG,CAAAjG,EAAA,GAAA0B,GAAG,CAACK,eAAe,KAAK,SAAS,cAAA/B,EAAA,cAAAA,EAAA,GAAI0B,GAAG,CAACuE,OAAO;QAC9D,IAAI,CAACjH,qBAAqB,CAACmB,GAAG,CAACuB,GAAG,CAACd,IAAI,EAAE,CACxC,IAAI,CAAAsF,EAAA,OAAI,CAAClH,qBAAqB,CAACqB,GAAG,CAACqB,GAAG,CAACd,IAAI,CAAC,cAAAsF,EAAA,cAAAA,EAAA,GAAI,EAAE,CAAC,EACnDxE,GAAG,CACH,CAAC;QACF,MAAMyE,WAAW,GAAG,CAAAC,EAAA,OAAI,CAACpH,qBAAqB,CAACqB,GAAG,CAACqB,GAAG,CAACd,IAAI,CAAC,cAAAwF,EAAA,cAAAA,EAAA,GAAI,EAAE;QAClE,MAAMC,cAAc,GAAG,IAAI,CAACC,qBAAqB,CAG/CH,WAAW,EAAEZ,SAAS,CAAC;QAEzB,IAAI,CAAC9G,UAAU,CAACmH,UAAU,CAAC,GAAG;UAC7BF,SAAS,EAAEI,eAAe;UAC1BS,MAAM,EAAEF;SACR;QAED;QACA,IAAI,CAACpF,QAAQ,CAACS,GAAG,CAACd,IAA2C,CAAC,GAAG,IAAI,CAACnC,UAAU,CAC/EmH,UAAU,CACV,CAACW,MAAe;QAEjB;QACA,IAAI,CAACtF,QAAQ,CAAC2E,UAAiD,CAAC,GAAG,IAAI,CAACnH,UAAU,CACjFmH,UAAU,CACV,CAACW,MAAe;QAEjB;QACA,IAAI,CAACtF,QAAQ,CAAC6E,eAAsD,CAAC,GAAG,IAAI,CAC1ErH,UAAU,CAACmH,UAAU,CAAC,CAACW,MAAe;OACxC,MAAM,IAAI,IAAA9J,cAAA,CAAA+J,kBAAkB,EAAC9E,GAAG,CAAC,EAAE;QACnC,MAAM4B,SAAS,GAAG,IAAA7G,cAAA,CAAAoJ,2BAA2B,EAACnE,GAAG,CAAC;QAClD,MAAM+E,cAAc,GAAG,IAAAhK,cAAA,CAAAiK,oBAAoB,EAACpD,SAAS,CAAC;QACtD,MAAM5C,KAAK,GAAG,IAAI,CAACiG,oBAAoB,CAACjF,GAAG,EAAE7D,YAAY,CAAC;QAC1D6D,GAAG,CAACgE,SAAS,GAAGe,cAAc;QAE9B,IAAI,EAAEnD,SAAS,IAAI,IAAI,CAACvC,OAAO,CAAC,IAAIW,GAAG,CAACd,IAAI,KAAK,OAAO,EAAE;UACzD;UACA,IAAI,CAACG,OAAO,CAACuC,SAA+C,CAAC,GAAG5C,KAAc;;QAE/E;QACA,IAAI,CAACK,OAAO,CAACW,GAAG,CAACd,IAA0C,CAAC,GAAGF,KAAc;QAC7E;QACA,IAAI,CAACK,OAAO,CAAC0F,cAAoD,CAAC,GAAG/F,KAAc;;MAGpF2E,MAAM,GAAG,CAAC,GAAGA,MAAM,EAAE3D,GAAG,CAAC;;IAG1B,IAAI,CAACX,OAAO,CAAC6F,SAAS,GAAG,IAAI,CAACD,oBAAoB,CAACnK,UAAA,CAAAgH,cAAc,EAAE3F,YAAY,CAAC;IAChF,IAAI,CAAC6B,cAAc,GAAG,CAAC,GAAG2F,MAAM,CAAwC;IACxE,IAAI,CAACjE,gBAAgB,GAAGmE,SAAS;EAClC;EAEA;EACQsB,aAAaA,CAACnF,GAAwB,EAAEqB,MAAiB;;IAChE,IAAI;MACH,OAAOnG,gBAAA,CAAAkK,KAAc,CAACC,4BAA4B,CAAC,CAAAzH,EAAA,GAAAoC,GAAG,CAACI,MAAM,cAAAxC,EAAA,cAAAA,EAAA,GAAI,EAAE,EAAEyD,MAAM,CAAC;KAC5E,CAAC,OAAOiE,KAAK,EAAE;MACf,MAAM,IAAIzK,aAAA,CAAA6F,iBAAiB,CAC1B,iCAAiCV,GAAG,CAACd,IAAI,KAAMoG,KAAe,CAACC,OAAO,EAAE,CACxE;;EAEH;EAEQX,qBAAqBA,CAC5BY,MAAS,EACTC,UAAe;IAEf,MAAMzF,GAAG,GAAGwF,MAAM,CAACA,MAAM,CAAC7C,MAAM,GAAG,CAAC,CAAC;IACrC,OAAO,CAAC,GAAGtB,MAAiB,KAAI;;MAC/B,IAAIqE,SAA0B;MAC9B,MAAMhC,IAAI,GAAG,CAAA9F,EAAA,OAAI,CAACN,qBAAqB,CAACqB,GAAG,CAACqB,GAAG,CAACd,IAAI,CAAC,cAAAtB,EAAA,cAAAA,EAAA,GAAI,EAAE;MAC3D,IAAI+H,SAAS,GAAwBjC,IAAI,CAAC,CAAC,CAAC;MAC5C,MAAMkC,kBAAkB,GAAGH,UAAU;MAErC,MAAMI,WAAW,GAA0BnC,IAAI,CAAClB,MAAM,CACrDsD,IAAI,IAAG;QAAA,IAAAlI,EAAA;QAAC,QAAC,CAAAA,EAAA,GAAAkI,IAAI,CAAC1F,MAAM,cAAAxC,EAAA,cAAAA,EAAA,GAAI,EAAE,EAAE+E,MAAM,KAAKtB,MAAM,CAACsB,MAAM;MAAA,EACpD;MAED,IAAIe,IAAI,CAACf,MAAM,KAAK,CAAC,IAAIkD,WAAW,CAAClD,MAAM,KAAK,CAAC,EAAE;QAClD+C,SAAS,GAAG,IAAI,CAACP,aAAa,CAACQ,SAAS,EAAEtE,MAAM,CAAC;QACjDnG,gBAAA,CAAA6K,SAAS,CAACC,QAAQ,CAAC,CAAA9H,EAAA,GAAA8B,GAAG,CAACI,MAAM,cAAAlC,EAAA,cAAAA,EAAA,GAAI,EAAE,EAAEwH,SAAS,CAAC;OAC/C,MAAM;QACN,MAAMO,MAAM,GAAgC,EAAE;QAE9C,KAAK,MAAMH,IAAI,IAAID,WAAW,EAAE;UAC/B,IAAI;YACHH,SAAS,GAAG,IAAI,CAACP,aAAa,CAACW,IAAI,EAAEzE,MAAM,CAAC;YAC5CnG,gBAAA,CAAA6K,SAAS,CAACC,QAAQ,CACjBF,IAAI,CAAC1F,MAA0C,EAC/CsF,SAAS,CACT;YACDC,SAAS,GAAGG,IAAI;YAChB;WACA,CAAC,OAAOI,CAAC,EAAE;YACXD,MAAM,CAACE,IAAI,CAACD,CAA8B,CAAC;;;QAG7C,IAAID,MAAM,CAACtD,MAAM,KAAKkD,WAAW,CAAClD,MAAM,EAAE;UACzC,MAAM,IAAIzH,gBAAA,CAAAkL,kBAAkB,CAACH,MAAM,CAAC;;;MAGtC,MAAM3G,OAAO,GAAG;QACfsB,SAAS,EAAE8E,SAAS;QAEpBW,IAAI,EAAEA,CACLjK,OAAoD,EACpDkK,KAAwB,KACrBnF,SAAA;UACH,WAAI,CAACoF,mBAAmB,CACvBZ,SAAS,EACTD,SAAS,EACTE,kBAAkB,EAClBxJ,OAAO,EACPkK,KAAK,CACL;UAAA;QAEFvF,IAAI,EAAG3E,OAAgD,IACtD,IAAI,CAACoK,mBAAmB,CAACb,SAAS,EAAED,SAAS,EAAEE,kBAAkB,EAAExJ,OAAO,CAAC;QAE5E8E,WAAW,EAAEA,CACZ9E,OAAoD,EACpDD,YAAA,GAA6BnB,YAAA,CAAA0C,qBAAqC,KAC/DyD,SAAA;UACH,WAAI,CAACC,0BAA0B,CAAC;YAC/BpB,GAAG,EAAE2F,SAAS;YACdtE,MAAM,EAAEqE,SAAS;YACjBvJ,YAAY;YACZC;WACA,CAAC;UAAA;QAEHkF,SAAS,EAAEA,CAAA,KAAM,IAAAnG,aAAA,CAAAoG,eAAe,EAACoE,SAAS,EAAED,SAAS,CAAC;QAEtDe,gBAAgB,EAAEA,CACjBrK,OAAoD,EACpDkK,KAAwB,KACrBnF,SAAA;UACH,WAAI,CAACuF,+BAA+B,CACnCf,SAAS,EACTD,SAAS,EACTE,kBAAkB,EAClBxJ,OAAO,EACPkK,KAAK,CACL;;OACF;MAED,IAAIX,SAAS,CAACtF,eAAe,KAAK,SAAS,EAAE;QAC5C,OAAOf,OAGN;;MAEF,OAAOA,OAGN;IACF,CAAC;EACF;EAEciH,mBAAmBA,CAChCvG,GAAwB,EACxBqB,MAAiB,EACjBwC,SAA6B,EAC7BzH,OAAiB,EACjBkK,KAAwB;;;MAExB,MAAMK,EAAE,GAAG,IAAAtL,UAAA,CAAAuL,kBAAkB,EAAC;QAC7B5G,GAAG;QACHqB,MAAM;QACNjF,OAAO,EAAAO,MAAA,CAAAC,MAAA,CAAAD,MAAA,CAAAC,MAAA,KACHR,OAAO;UACVyB,aAAa,EAAE,IAAI,CAACV,MAAM,CAACC;QAAqB,EAChD;QACDyD,eAAe,EAAAlE,MAAA,CAAAC,MAAA,CAAAD,MAAA,CAAAC,MAAA,KACX,IAAI,CAACR,OAAO;UACfiC,IAAI,EAAE,CAAAT,EAAA,OAAI,CAACxB,OAAO,CAACiC,IAAI,cAAAT,EAAA,cAAAA,EAAA,GAAI,IAAI,CAACT,MAAM,CAAC0J;QAAc;OAEtD,CAAC;MACF,IAAI;QACH,MAAMlD,MAAM,GAAG,MAAM,IAAA7I,UAAA,CAAAuL,IAAI,EAAC,IAAI,EAAEM,EAAE,EAAEL,KAAK,EAAEtL,YAAA,CAAA0C,qBAAqB,CAAC;QACjE,OAAO,IAAAvC,aAAA,CAAA2L,kBAAkB,EAAC9G,GAAG,EAAE2D,MAAM,CAAC;OACtC,CAAC,OAAO2B,KAAc,EAAE;QACxB,IAAIA,KAAK,YAAYzK,aAAA,CAAAkM,sBAAsB,EAAE;UAC5C;UACA,IAAAhM,cAAA,CAAAiM,uBAAuB,EAACnD,SAAS,EAAEyB,KAAK,CAAC2B,UAAU,CAAC;;QAErD,MAAM3B,KAAK;;;;EAICoB,+BAA+BA,CAG5C1G,GAAwB,EACxBqB,MAAiB,EACjBwC,SAA6B,EAC7BzH,OAAiB,EACjBkK,KAAwB;;;MAExB,MAAMK,EAAE,GAAG,IAAAtL,UAAA,CAAA6L,yBAAyB,EAAC;QACpClH,GAAG;QACHqB,MAAM;QACNjF,OAAO,EAAAO,MAAA,CAAAC,MAAA,CAAAD,MAAA,CAAAC,MAAA,KAAOR,OAAO;UAAEyB,aAAa,EAAE,IAAI,CAACV,MAAM,CAACC;QAAqB,EAAE;QACzEyD,eAAe,EAAAlE,MAAA,CAAAC,MAAA,CAAAD,MAAA,CAAAC,MAAA,KACX,IAAI,CAACR,OAAO;UACfiC,IAAI,EAAE,CAAAT,EAAA,OAAI,CAACxB,OAAO,CAACiC,IAAI,cAAAT,EAAA,cAAAA,EAAA,GAAI,IAAI,CAACT,MAAM,CAAC0J;QAAc;OAEtD,CAAC;MAEF,IAAI;QACH,OAAO,IAAA/L,UAAA,CAAA2L,gBAAgB,EAAC,IAAI,EAAEE,EAAE,EAAEL,KAAK,EAAEtL,YAAA,CAAA0C,qBAAqB,CAAC;OAC/D,CAAC,OAAO4H,KAAc,EAAE;QACxB,IAAIA,KAAK,YAAYzK,aAAA,CAAAkM,sBAAsB,EAAE;UAC5C;UACA,IAAAhM,cAAA,CAAAiM,uBAAuB,EAACnD,SAAS,EAAEyB,KAAK,CAAC2B,UAAU,CAAC;;QAErD,MAAM3B,KAAK;;;;EAILkB,mBAAmBA,CAC1BxG,GAAwB,EACxBqB,MAAiB,EACjBwC,SAA6B,EAC7BzH,OAAiB,EACjByE,eAAiC;;IAEjC,IAAIsG,uBAAuB,GAAGtG,eAAe,aAAfA,eAAe,cAAfA,eAAe,GAAI,IAAI,CAACzE,OAAO;IAC7D+K,uBAAuB,GAAAxK,MAAA,CAAAC,MAAA,CAAAD,MAAA,CAAAC,MAAA,KACnBuK,uBAAuB;MAC1BjK,KAAK,EAAEZ,SAAS;MAChB+B,IAAI,EAAE,CAAAH,EAAA,IAAAN,EAAA,GAAAuJ,uBAAuB,CAAC9I,IAAI,cAAAT,EAAA,cAAAA,EAAA,GAAI,IAAI,CAACiJ,cAAc,cAAA3I,EAAA,cAAAA,EAAA,GAAI5B;IAAS,EACtE;IACD,MAAMqK,EAAE,GAAG,IAAAtL,UAAA,CAAA+L,eAAe,EAAC;MAC1BpH,GAAG;MACHqB,MAAM;MACNjF,OAAO,EAAAO,MAAA,CAAAC,MAAA,CAAAD,MAAA,CAAAC,MAAA,KAAOR,OAAO;QAAEyB,aAAa,EAAE,IAAI,CAACV,MAAM,CAACC;MAAqB,EAAE;MACzEyD,eAAe,EAAEsG;KACjB,CAAC;IAEF,MAAME,iBAAiB,GAAG,IAAAvM,UAAA,CAAAwM,eAAe,EAAC,IAAI,EAAEX,EAAE,EAAE3L,YAAA,CAAA0C,qBAAqB,EAAE;MAC1E;MACA6J,wBAAwB,EAAE,KAAK;MAC/BC,WAAW,EAAE,IAAI,CAACxJ;KAClB,CAAC;IAEF;IACA,KAAKqJ,iBAAiB,CAACxI,EAAE,CAAC,OAAO,EAAGyG,KAAc,IAAI;MACrD,IAAIA,KAAK,YAAYzK,aAAA,CAAAkM,sBAAsB,EAAE;QAC5C;QACA,IAAAhM,cAAA,CAAAiM,uBAAuB,EAACnD,SAAS,EAAEyB,KAAK,CAAC2B,UAAU,CAAC;;IAEtD,CAAC,CAAC;IACF,OAAOI,iBAAiB;EACzB;EAEQpG,yBAAyBA,CAChCjB,GAAwB,EACxBqB,MAAiB,EACjBjF,OAAiB,EACjByE,eAAiC;;IAEjC,IAAIsG,uBAAuB,GAAGtG,eAAe,aAAfA,eAAe,cAAfA,eAAe,GAAI,IAAI,CAACzE,OAAO;IAC7D+K,uBAAuB,GAAAxK,MAAA,CAAAC,MAAA,CAAAD,MAAA,CAAAC,MAAA,KACnBuK,uBAAuB;MAC1B9I,IAAI,EAAE,CAAAH,EAAA,IAAAN,EAAA,GAAAuJ,uBAAuB,CAAC9I,IAAI,cAAAT,EAAA,cAAAA,EAAA,GAAI,IAAI,CAACiJ,cAAc,cAAA3I,EAAA,cAAAA,EAAA,GAAI5B;IAAS,EACtE;IACD,MAAMqK,EAAE,GAAG,IAAAtL,UAAA,CAAA+L,eAAe,EAAC;MAC1BpH,GAAG;MACHqB,MAAM;MACNjF,OAAO,EAAAO,MAAA,CAAAC,MAAA,CAAAD,MAAA,CAAAC,MAAA,KAAOR,OAAO;QAAEyB,aAAa,EAAE,IAAI,CAACV,MAAM,CAACC;MAAqB,EAAE;MACzEyD,eAAe,EAAEsG;KACjB,CAAC;IACF,OAAO,IAAArM,UAAA,CAAAwM,eAAe,EAAC,IAAI,EAAEX,EAAE,EAAE3L,YAAA,CAAA0C,qBAAqB,EAAE;MACvD+J,mBAAmB,EAAEC,OAAO,IAAG;QAC9B,IAAIA,OAAO,CAACC,MAAM,KAAKC,MAAM,CAAC,CAAC,CAAC,EAAE;UACjC,MAAM,IAAI/M,aAAA,CAAA6F,iBAAiB,CAAC,yBAAyB,EAAEgH,OAAO,CAAC;;QAGhE,MAAMjI,WAAW,GAAG,IAAI,CAACD,KAAK,EAAE;QAEhC;QACAC,WAAW,CAACrD,OAAO,CAACuB,OAAO,GAAG+J,OAAO,CAACG,eAAe;QACrD,OAAOpI,WAAW;MACnB,CAAC;MACD+H,WAAW,EAAE,IAAI,CAACxJ,cAAc;MAChC;MACAuJ,wBAAwB,EAAE;KAC1B,CAAC;EACH;EAEcnG,0BAA0BA,CAGtC;IACDpB,GAAG;IACHqB,MAAM;IACNlF,YAAY;IACZC,OAAO;IACPyE;EAAe,CAOf;;MACA,MAAM8F,EAAE,GAAG,IAAAtL,UAAA,CAAAyM,oBAAoB,EAAC;QAC/B9H,GAAG;QACHqB,MAAM;QACNjF,OAAO,EAAAO,MAAA,CAAAC,MAAA,CAAAD,MAAA,CAAAC,MAAA,KAAOR,OAAO;UAAEyB,aAAa,EAAE,IAAI,CAACV,MAAM,CAACC;QAAqB,EAAE;QACzEyD,eAAe,EAAEA,eAAe,aAAfA,eAAe,cAAfA,eAAe,GAAI,IAAI,CAACzE;OACzC,CAAC;MACF,OAAO,IAAAtB,UAAA,CAAAoG,WAAW,EAAC,IAAI,EAAEyF,EAAE,EAAE3L,YAAA,CAAA+M,SAAS,CAACC,MAAM,EAAE7L,YAAY,CAAC;IAC7D,CAAC;;EAED;EACQ8I,oBAAoBA,CAC3BjF,GAAgD,EAChD7D,YAAA,GAA2BnB,YAAA,CAAA0C,qBAAqB;IAEhD,OAAO,CAAC,GAAG2D,MAAiB,KAAI;;MAC/B,MAAM;QAAEY,MAAM;QAAEF;MAAS,CAAE,GAAG,IAAA5G,aAAA,CAAA+G,cAAc,EAC3C,IAAI,CAAC9F,OAAO,EACZ4D,GAAG,EACHqB,MAAM,CAAC,CAAC,CAAoB,CAC5B;MACD,MAAM4G,GAAG,GAAG,IAAI7M,qBAAA,CAAAI,gBAAgB,CAC/B;QACCmC,OAAO,EAAE,IAAI,CAACvB,OAAO,CAACuB,OAAO;QAC7BsE,MAAM;QACNjC,GAAG;QACHjE,aAAa,EAAE,IAAI,CAACiC;OACpB,EACD;QACC;QACAkK,mBAAmB,EAAE,IAAI,CAACA,mBAGzB;QACD/L;OACA,CACD;MACD,IAAI,CAAC,IAAAjB,gBAAA,CAAA8B,SAAS,EAAC+E,SAAS,CAAC,EAAE;QAC1B;QACA,IAAI,CAACP,aAAa,CAACxB,GAAG,CAACd,IAAI,EAAE;UAAE6C,SAAS;UAAEE;QAAM,CAAE,EAAE9F,YAAY,CAAC,CAC/DgM,IAAI,CAAC5M,IAAI,IAAG;UACZA,IAAI,CAAC6M,OAAO,CAAC9F,GAAG,IAAI2F,GAAG,CAACI,IAAI,CAAC,MAAM,EAAE/F,GAAe,CAAC,CAAC;QACvD,CAAC,CAAC,CACDgG,KAAK,CAAEhD,KAAY,IAAI;UACvB2C,GAAG,CAACI,IAAI,CACP,OAAO,EACP,IAAIxN,aAAA,CAAA0N,iBAAiB,CAAC,4BAA4B,EAAEjD,KAAK,CAAC,CAC1D;QACF,CAAC,CAAC;;MAEJ,CAAA1H,EAAA,OAAI,CAACsK,mBAAmB,cAAAtK,EAAA,uBAAAA,EAAA,CAAE4K,eAAe,CAACP,GAAG,EAAEK,KAAK,CAAEhD,KAAY,IAAI;QACrE2C,GAAG,CAACI,IAAI,CAAC,OAAO,EAAE,IAAIxN,aAAA,CAAA0N,iBAAiB,CAAC,sBAAsB,EAAEjD,KAAK,CAAC,CAAC;MACxE,CAAC,CAAC;MAEF,OAAO2C,GAAG;IACX,CAAC;EACF;EAEU1J,wBAAwBA,CAAwBsB,OAAU;IACnE;IACA,MAAM4I,YAAY,GAAG,IAAI;IACzB,IAAI,CAAC5I,OAAO,GAAGA,OAAO;IAEtB,IAAI4I,YAAY,CAAC3L,eAAe,EAAE;MACjC+C,OAAO,CAAChB,EAAE,CAACjE,WAAA,CAAAkE,eAAe,CAACC,aAAa,EAAEC,KAAK,IAAG;QACjDyJ,YAAY,CAACxJ,SAAS,CAAC;UAAE,CAACD,KAAK,CAACE,IAAI,GAAGF,KAAK,CAACG;QAAQ,CAAE,CAAC;MACzD,CAAC,CAAC;;EAEJ;;AAjgCDuJ,OAAA,CAAA9M,QAAA,GAAAA,QAAA"},"metadata":{},"sourceType":"script","externalDependencies":[]}