{"ast":null,"code":"\"use strict\";\n\n/*\nThis file is part of web3.js.\n\nweb3.js is free software: you can redistribute it and/or modify\nit under the terms of the GNU Lesser General Public License as published by\nthe Free Software Foundation, either version 3 of the License, or\n(at your option) any later version.\n\nweb3.js is distributed in the hope that it will be useful,\nbut WITHOUT ANY WARRANTY; without even the implied warranty of\nMERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\nGNU Lesser General Public License for more details.\n\nYou should have received a copy of the GNU Lesser General Public License\nalong with web3.js.  If not, see <http://www.gnu.org/licenses/>.\n*/\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.InvalidResponseError = exports.ResponseError = void 0;\nconst web3_error_base_js_1 = require(\"../web3_error_base.js\");\nconst error_codes_js_1 = require(\"../error_codes.js\");\n// To avoid circular package dependency, copied to code here. If you update this please update same function in `json_rpc.ts`\nconst isResponseWithError = response => !Array.isArray(response) && response.jsonrpc === '2.0' && !!response && (\n// eslint-disable-next-line no-null/no-null\nresponse.result === undefined || response.result === null) &&\n// JSON RPC consider \"null\" as valid response\n'error' in response && (typeof response.id === 'number' || typeof response.id === 'string');\nconst buildErrorMessage = response => isResponseWithError(response) ? response.error.message : '';\nclass ResponseError extends web3_error_base_js_1.BaseWeb3Error {\n  constructor(response, message, request) {\n    var _a;\n    super(message !== null && message !== void 0 ? message : `Returned error: ${Array.isArray(response) ? response.map(r => buildErrorMessage(r)).join(',') : buildErrorMessage(response)}`);\n    this.code = error_codes_js_1.ERR_RESPONSE;\n    if (!message) {\n      this.data = Array.isArray(response) ? response.map(r => {\n        var _a;\n        return (_a = r.error) === null || _a === void 0 ? void 0 : _a.data;\n      }) : (_a = response === null || response === void 0 ? void 0 : response.error) === null || _a === void 0 ? void 0 : _a.data;\n    }\n    this.request = request;\n    let errorOrErrors;\n    if (`error` in response) {\n      errorOrErrors = response.error;\n    } else if (response instanceof Array) {\n      errorOrErrors = response.map(r => r.error);\n    }\n    this.innerError = errorOrErrors;\n  }\n  toJSON() {\n    return Object.assign(Object.assign({}, super.toJSON()), {\n      data: this.data,\n      request: this.request\n    });\n  }\n}\nexports.ResponseError = ResponseError;\nclass InvalidResponseError extends ResponseError {\n  constructor(result, request) {\n    super(result, undefined, request);\n    this.code = error_codes_js_1.ERR_INVALID_RESPONSE;\n    let errorOrErrors;\n    if (`error` in result) {\n      errorOrErrors = result.error;\n    } else if (result instanceof Array) {\n      errorOrErrors = result.map(r => r.error);\n    }\n    this.innerError = errorOrErrors;\n  }\n}\nexports.InvalidResponseError = InvalidResponseError;","map":{"version":3,"names":["web3_error_base_js_1","require","error_codes_js_1","isResponseWithError","response","Array","isArray","jsonrpc","result","undefined","id","buildErrorMessage","error","message","ResponseError","BaseWeb3Error","constructor","request","map","r","join","code","ERR_RESPONSE","data","_a","errorOrErrors","innerError","toJSON","Object","assign","exports","InvalidResponseError","ERR_INVALID_RESPONSE"],"sources":["../../../src/errors/response_errors.ts"],"sourcesContent":[null],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}