{"ast":null,"code":"import { ref } from \"vue\";\nimport { generateMnemonic, mnemonicToSeed } from \"bip39\";\nimport ethwllet, { hdkey, fromV3 } from \"ethereumjs-wallet\";\nimport Web3 from \"web3\";\n\n//创建助记词\n// const mnemonic = generateMnemonic();\n// console.log(\"mnemonic--->\",mnemonic)\n\nexport default {\n  __name: 'AccountSys',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const gm = ref(\"slab soon raise explain piano number sleep style story mushroom foil bunker\");\n    //const seed =\n    const genMnemonic = async () => {\n      const seed = await mnemonicToSeed(gm.value);\n      console.log(\"seed---->\", seed);\n      const hdWallet = hdkey.fromMasterSeed(seed);\n      const keypair = hdWallet.derivePath(\"m/44'/60'/0'/0/0\");\n      console.log(\"keypair--->\", keypair);\n\n      //获取私钥\n      //1.获取钱包对象\n      const wallet = keypair.getWallet();\n      console.log(\"wallet---->\", wallet);\n\n      //2.获取钱包地址\n      const lowerCaseAddress = wallet.getAddressString();\n      console.log(\"lowerCaseAddress--->\", lowerCaseAddress);\n      //3.获取钱包的校验地址\n      const checkAddress = wallet.getChecksumAddressString();\n      //4.获取私钥\n      const pkey = wallet.getPrivateKey().toString(\"hex\");\n      console.log(\"pkey----<>\", pkey);\n\n      //导出keystore\n\n      //1.web3js\n\n      var web3 = new Web3(Web3.givenProvider || \"wss://goerli.infura.io/ws/v3/dc92288a859d445890ede39d9dba5861\");\n      //const keystore = web3.eth.accounts.encrypt(pkey, \"111\");\n      //console.log(\"keystore----->\",keystore)\n\n      const keystore2 = await wallet.toV3(\"111\");\n      //console.log(\"keystore2----->\",keystore2);\n\n      //通过keystore 获取私钥\n      //1.web3\n      const res = web3.eth.accounts.decrypt(keystore, '111');\n      console.log(\"res----->\", res);\n\n      //2.wallet\n\n      const res2 = await ethwllet.fromV3(keystore2, \"111\");\n      const key = res2.getPrivateKey().toString(\"hex\");\n      console.log(\"key----\", key);\n    };\n    genMnemonic();\n    const __returned__ = {\n      gm,\n      genMnemonic,\n      ref,\n      get generateMnemonic() {\n        return generateMnemonic;\n      },\n      get mnemonicToSeed() {\n        return mnemonicToSeed;\n      },\n      get ethwllet() {\n        return ethwllet;\n      },\n      get hdkey() {\n        return hdkey;\n      },\n      get fromV3() {\n        return fromV3;\n      },\n      get Web3() {\n        return Web3;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","generateMnemonic","mnemonicToSeed","ethwllet","hdkey","fromV3","Web3","gm","genMnemonic","seed","value","console","log","hdWallet","fromMasterSeed","keypair","derivePath","wallet","getWallet","lowerCaseAddress","getAddressString","checkAddress","getChecksumAddressString","pkey","getPrivateKey","toString","web3","givenProvider","keystore2","toV3","res","eth","accounts","decrypt","keystore","res2","key"],"sources":["D:/a/wallet-demo/web3-wallet/src/components/AccountSys.vue"],"sourcesContent":["\r\n\r\n<script setup>\r\nimport { ref } from \"vue\";\r\nimport { generateMnemonic, mnemonicToSeed } from \"bip39\";\r\nimport ethwllet, { hdkey, fromV3 } from \"ethereumjs-wallet\";\r\n\r\nimport Web3 from \"web3\";\r\n\r\n//创建助记词\r\n// const mnemonic = generateMnemonic();\r\n// console.log(\"mnemonic--->\",mnemonic)\r\n\r\nconst gm = ref(\r\n  \"slab soon raise explain piano number sleep style story mushroom foil bunker\"\r\n);\r\n//const seed =\r\nconst genMnemonic = async () => {\r\n  const seed = await mnemonicToSeed(gm.value);\r\n  console.log(\"seed---->\", seed);\r\n  const hdWallet = hdkey.fromMasterSeed(seed);\r\n\r\n  const keypair = hdWallet.derivePath(\"m/44'/60'/0'/0/0\");\r\n  console.log(\"keypair--->\", keypair);\r\n\r\n  //获取私钥\r\n  //1.获取钱包对象\r\n  const wallet = keypair.getWallet();\r\n  console.log(\"wallet---->\", wallet);\r\n\r\n  //2.获取钱包地址\r\n  const lowerCaseAddress = wallet.getAddressString();\r\n  console.log(\"lowerCaseAddress--->\", lowerCaseAddress);\r\n  //3.获取钱包的校验地址\r\n  const checkAddress = wallet.getChecksumAddressString();\r\n  //4.获取私钥\r\n  const pkey = wallet.getPrivateKey().toString(\"hex\");\r\n  console.log(\"pkey----<>\", pkey);\r\n\r\n  //导出keystore\r\n\r\n  //1.web3js\r\n\r\n  var web3 = new Web3(\r\n    Web3.givenProvider ||\r\n      \"wss://goerli.infura.io/ws/v3/dc92288a859d445890ede39d9dba5861\"\r\n  );\r\n  //const keystore = web3.eth.accounts.encrypt(pkey, \"111\");\r\n  //console.log(\"keystore----->\",keystore)\r\n\r\n  const keystore2 = await wallet.toV3(\"111\");\r\n  //console.log(\"keystore2----->\",keystore2);\r\n\r\n  //通过keystore 获取私钥\r\n  //1.web3\r\n  const res = web3.eth.accounts.decrypt(keystore,'111');\r\n  console.log(\"res----->\",res)\r\n\r\n  //2.wallet\r\n\r\n  const res2 = await ethwllet.fromV3(keystore2, \"111\") ;\r\n\r\n  const key = res2.getPrivateKey().toString(\"hex\");\r\n  console.log(\"key----\", key);\r\n};\r\ngenMnemonic();\r\n</script>\r\n\r\n<template>\r\n  <h1>助记词</h1>\r\n  <p>{{ gm }}</p>\r\n\r\n  <p>账号地址:0x4f98c8f01c3e70f9dac82fe86d70bdc5389efa8d</p>\r\n  <p>\r\n    账号私钥:6ecbaa87da47eb92255bc0bb5ce1d1340b7cf91390ba0475b2c5bd82e52d94ec\r\n  </p>\r\n</template>\r\n<style>\r\n</style>"],"mappings":"AAGA,SAASA,GAAG,QAAQ,KAAK;AACzB,SAASC,gBAAgB,EAAEC,cAAc,QAAQ,OAAO;AACxD,OAAOC,QAAQ,IAAIC,KAAK,EAAEC,MAAM,QAAQ,mBAAmB;AAE3D,OAAOC,IAAI,MAAM,MAAM;;AAEvB;AACA;AACA;;;;;;;;IAEA,MAAMC,EAAE,GAAGP,GAAG,CACZ,6EACF,CAAC;IACD;IACA,MAAMQ,WAAW,GAAG,MAAAA,CAAA,KAAY;MAC9B,MAAMC,IAAI,GAAG,MAAMP,cAAc,CAACK,EAAE,CAACG,KAAK,CAAC;MAC3CC,OAAO,CAACC,GAAG,CAAC,WAAW,EAAEH,IAAI,CAAC;MAC9B,MAAMI,QAAQ,GAAGT,KAAK,CAACU,cAAc,CAACL,IAAI,CAAC;MAE3C,MAAMM,OAAO,GAAGF,QAAQ,CAACG,UAAU,CAAC,kBAAkB,CAAC;MACvDL,OAAO,CAACC,GAAG,CAAC,aAAa,EAAEG,OAAO,CAAC;;MAEnC;MACA;MACA,MAAME,MAAM,GAAGF,OAAO,CAACG,SAAS,CAAC,CAAC;MAClCP,OAAO,CAACC,GAAG,CAAC,aAAa,EAAEK,MAAM,CAAC;;MAElC;MACA,MAAME,gBAAgB,GAAGF,MAAM,CAACG,gBAAgB,CAAC,CAAC;MAClDT,OAAO,CAACC,GAAG,CAAC,sBAAsB,EAAEO,gBAAgB,CAAC;MACrD;MACA,MAAME,YAAY,GAAGJ,MAAM,CAACK,wBAAwB,CAAC,CAAC;MACtD;MACA,MAAMC,IAAI,GAAGN,MAAM,CAACO,aAAa,CAAC,CAAC,CAACC,QAAQ,CAAC,KAAK,CAAC;MACnDd,OAAO,CAACC,GAAG,CAAC,YAAY,EAAEW,IAAI,CAAC;;MAE/B;;MAEA;;MAEA,IAAIG,IAAI,GAAG,IAAIpB,IAAI,CACjBA,IAAI,CAACqB,aAAa,IAChB,+DACJ,CAAC;MACD;MACA;;MAEA,MAAMC,SAAS,GAAG,MAAMX,MAAM,CAACY,IAAI,CAAC,KAAK,CAAC;MAC1C;;MAEA;MACA;MACA,MAAMC,GAAG,GAAGJ,IAAI,CAACK,GAAG,CAACC,QAAQ,CAACC,OAAO,CAACC,QAAQ,EAAC,KAAK,CAAC;MACrDvB,OAAO,CAACC,GAAG,CAAC,WAAW,EAACkB,GAAG,CAAC;;MAE5B;;MAEA,MAAMK,IAAI,GAAG,MAAMhC,QAAQ,CAACE,MAAM,CAACuB,SAAS,EAAE,KAAK,CAAC;MAEpD,MAAMQ,GAAG,GAAGD,IAAI,CAACX,aAAa,CAAC,CAAC,CAACC,QAAQ,CAAC,KAAK,CAAC;MAChDd,OAAO,CAACC,GAAG,CAAC,SAAS,EAAEwB,GAAG,CAAC;IAC7B,CAAC;IACD5B,WAAW,CAAC,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}